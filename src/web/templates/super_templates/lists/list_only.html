<table class="table table-striped table-bordered table-hover align-middle">
    <thead class="table-dark">
        <tr>
            {% for column in columns %}
                <th scope="col" class="text-center h3">
                    {{ column.display_name }}
                </th>
            {% endfor %}

            {% set ns = namespace(show_actions=False) %}
            
            {% for row in items if not ns.show_actions %}
                {% for button in row_buttons.get_buttons(row) %}
                    {% set ns.show_actions = button.visible %}
                {% endfor %}
            {% endfor %}

            {% if ns.show_actions %}
                <th scope="col" class="text-center h3">
                    Acciones
                </th>
            {% endif %}
        </tr>
    </thead>

    <tbody>
        {% for row in items %}
            <tr>
                {% for column in columns %}
                    <td class="text-center">{{ column.value_to_string(column.object_to_value(row)) }}</td>
                {% endfor %}

                {% if ns.show_actions %}
                    {% with custom_buttons = row_buttons.get_buttons(row) %}
                        <td class="btn-group btn-toolbar align-items-center btn-block">
                            {% for button in custom_buttons %}
                                <button type="button" class="{{ button.btn_class }} button" onclick="location.href='{{ button.url }}'"
                                    {{disable_if(button.disabled) }}>
                                    {{ button.display_name }}
                                </button>
                            {% else %}
                                <button type="button" class="btn button" style="visibility: hidden">
                                    &nbsp;
                                </button>
                            {% endfor %}
                        </td>
                    {% endwith %}
                {% endif %}
            </tr>
        {% endfor %}
    </tbody>
</table>